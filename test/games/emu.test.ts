/* eslint-disable @typescript-eslint/no-unused-expressions */
import "mocha";
import { expect } from "chai";
// import { EmuGame } from '../../src/games';
import { birdDir, getBirdSuits, canGrowBird, interpolateWilds, scoreBird, EmuGame } from "../../src/games/emu";

const bug1 = `{"game":"emu","numplayers":2,"variants":[],"gameover":false,"winner":[],"stack":[{"_version":"20250610","_results":[],"_timestamp":"2025-06-29T17:02:30.841Z","currplayer":1,"board":[[],[]],"hands":[["3SK","NS","1S","2VL","8YK","7VY"],["1V","7ML","6SY","1M","3MV","PMSL"]],"discard":[],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"Ace Suns","where":"new","how":"1S"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:06:44.801Z","currplayer":2,"lastmove":"1S-new,deck","board":[[["1S"]],[]],"hands":[["3SK","NS","2VL","8YK","7VY","1K"],["1V","7ML","6SY","1M","3MV","PMSL"]],"discard":[],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"Ace Moons","where":"new","how":"1M"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:08:34.500Z","currplayer":1,"lastmove":"1M-new,deck","board":[[["1S"]],[["1M"]]],"hands":[["3SK","NS","2VL","8YK","7VY","1K"],["1V","7ML","6SY","3MV","PMSL","PVLY"]],"discard":[],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"3 Suns Knots","where":"1","how":"3SK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:13:16.604Z","currplayer":2,"lastmove":"3SK-1,deck","board":[[["1S","3SK"]],[["1M"]]],"hands":[["NS","2VL","8YK","7VY","1K","5YK"],["1V","7ML","6SY","3MV","PMSL","PVLY"]],"discard":[],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"3 Moons Waves","where":"1","how":"3MV"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:14:58.986Z","currplayer":1,"lastmove":"3MV-1,deck","board":[[["1S","3SK"]],[["1M","3MV"]]],"hands":[["NS","2VL","8YK","7VY","1K","5YK"],["1V","7ML","6SY","PMSL","PVLY","NL"]],"discard":[],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"8 Wyrms Knots","where":"new","how":"8YK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:17:48.395Z","currplayer":2,"lastmove":"8YK-new,deck","board":[[["1S","3SK"],["8YK"]],[["1M","3MV"]]],"hands":[["NS","2VL","7VY","1K","5YK","6MV"],["1V","7ML","6SY","PMSL","PVLY","NL"]],"discard":[],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"Crown Leaves","where":"new","how":"NL"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:18:30.556Z","currplayer":1,"lastmove":"NL-new,deck","board":[[["1S","3SK"],["8YK"]],[["1M","3MV"],["NL"]]],"hands":[["NS","2VL","7VY","1K","5YK","6MV"],["1V","7ML","6SY","PMSL","PVLY","5SV"]],"discard":[],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"7 Waves Wyrms","where":"2","how":"7VY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:21:08.600Z","currplayer":2,"lastmove":"7VY-2,deck","board":[[["1S","3SK"],["8YK","7VY"]],[["1M","3MV"],["NL"]]],"hands":[["NS","2VL","1K","5YK","6MV","9VY"],["1V","7ML","6SY","PMSL","PVLY","5SV"]],"discard":[],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"Pawn Waves Leaves Wyrms","where":"2","how":"PVLY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:23:34.412Z","currplayer":1,"lastmove":"PVLY-2,deck","board":[[["1S","3SK"],["8YK","7VY"]],[["1M","3MV"],["NL","PVLY"]]],"hands":[["NS","2VL","1K","5YK","6MV","9VY"],["1V","7ML","6SY","PMSL","5SV","NV"]],"discard":[],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"5 Wyrms Knots","where":"2","how":"5YK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:25:11.866Z","currplayer":2,"lastmove":"5YK-2,deck","board":[[["1S","3SK"],["8YK","7VY","5YK"]],[["1M","3MV"],["NL","PVLY"]]],"hands":[["NS","2VL","1K","6MV","9VY","NK"],["1V","7ML","6SY","PMSL","5SV","NV"]],"discard":[],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"Pawn Moons Suns Leaves","where":"1","how":"PMSL"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:32:56.674Z","currplayer":1,"lastmove":"PMSL-1,deck","board":[[["1S","3SK"],["8YK","7VY","5YK"]],[["1M","3MV","PMSL"],["NL","PVLY"]]],"hands":[["NS","2VL","1K","6MV","9VY","NK"],["1V","7ML","6SY","5SV","NV","9MS"]],"discard":[],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"9 Waves Wyrms","where":"new","how":"9VY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:35:49.368Z","currplayer":2,"lastmove":"9VY-new,deck","board":[[["1S","3SK"],["8YK","7VY","5YK"],["9VY"]],[["1M","3MV","PMSL"],["NL","PVLY"]]],"hands":[["NS","2VL","1K","6MV","NK","0"],["1V","7ML","6SY","5SV","NV","9MS"]],"discard":[],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"7 Moons Leaves","where":"1","how":"7ML"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:36:33.199Z","currplayer":1,"lastmove":"7ML-1,deck","board":[[["1S","3SK"],["8YK","7VY","5YK"],["9VY"]],[["1M","3MV","PMSL","7ML"],["NL","PVLY"]]],"hands":[["NS","2VL","1K","6MV","NK","0"],["1V","6SY","5SV","NV","9MS","9LK"]],"discard":[],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"6 Moons Waves","where":"3","how":"6MV"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:39:37.615Z","currplayer":2,"lastmove":"6MV-3,deck","board":[[["1S","3SK"],["8YK","7VY","5YK"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML"],["NL","PVLY"]]],"hands":[["NS","2VL","1K","NK","0","NM"],["1V","6SY","5SV","NV","9MS","9LK"]],"discard":[],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"9 Moons Suns","where":"1","how":"9MS"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:41:36.817Z","currplayer":1,"lastmove":"9MS-1,deck","board":[[["1S","3SK"],["8YK","7VY","5YK"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY"]]],"hands":[["NS","2VL","1K","NK","0","NM"],["1V","6SY","5SV","NV","9LK","1L"]],"discard":[],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"Crown Knots","where":"discard","how":"NK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:43:41.319Z","currplayer":2,"lastmove":"NK-discard,deck","board":[[["1S","3SK"],["8YK","7VY","5YK"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY"]]],"hands":[["NS","2VL","1K","0","NM","8VL"],["1V","6SY","5SV","NV","9LK","1L"]],"discard":["NK"],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"9 Leaves Knots","where":"new","how":"9LK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:47:51.459Z","currplayer":1,"lastmove":"9LK-new,deck","board":[[["1S","3SK"],["8YK","7VY","5YK"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY"],["9LK"]]],"hands":[["NS","2VL","1K","0","NM","8VL"],["1V","6SY","5SV","NV","1L","6LK"]],"discard":["NK"],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"Ace Knots","where":"discard","how":"1K"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:49:22.888Z","currplayer":2,"lastmove":"1K-discard,deck","board":[[["1S","3SK"],["8YK","7VY","5YK"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY"],["9LK"]]],"hands":[["NS","2VL","0","NM","8VL","1Y"],["1V","6SY","5SV","NV","1L","6LK"]],"discard":["NK","1K"],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"6 Leaves Knots","where":"2","how":"6LK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T17:50:42.273Z","currplayer":1,"lastmove":"6LK-2,deck","board":[[["1S","3SK"],["8YK","7VY","5YK"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY","6LK"],["9LK"]]],"hands":[["NS","2VL","0","NM","8VL","1Y"],["1V","6SY","5SV","NV","1L","4VL"]],"discard":["NK","1K"],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"8 Waves Leaves","where":"discard","how":"8VL"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T18:25:34.762Z","currplayer":2,"lastmove":"8VL-discard,deck","board":[[["1S","3SK"],["8YK","7VY","5YK"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY","6LK"],["9LK"]]],"hands":[["NS","2VL","0","NM","1Y","PMYK"],["1V","6SY","5SV","NV","1L","4VL"]],"discard":["NK","1K","8VL"],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"4 Waves Leaves","where":"2","how":"4VL"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T18:28:33.598Z","currplayer":1,"lastmove":"4VL-2,deck","board":[[["1S","3SK"],["8YK","7VY","5YK"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY","6LK","4VL"],["9LK"]]],"hands":[["NS","2VL","0","NM","1Y","PMYK"],["1V","6SY","5SV","NV","1L","2SY"]],"discard":["NK","1K","8VL"],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"Pawn Moons Wyrms Knots","where":"2","how":"PMYK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-29T18:30:23.837Z","currplayer":2,"lastmove":"PMYK-2,deck","board":[[["1S","3SK"],["8YK","7VY","5YK","PMYK"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY","6LK","4VL"],["9LK"]]],"hands":[["NS","2VL","0","NM","1Y","7SK"],["1V","6SY","5SV","NV","1L","2SY"]],"discard":["NK","1K","8VL"],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"Crown Waves","where":"discard","how":"NV"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T02:30:45.429Z","currplayer":1,"lastmove":"NV-discard,deck","board":[[["1S","3SK"],["8YK","7VY","5YK","PMYK"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY","6LK","4VL"],["9LK"]]],"hands":[["NS","2VL","0","NM","1Y","7SK"],["1V","6SY","5SV","1L","2SY","NY"]],"discard":["NK","1K","8VL","NV"],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"Ace Wyrms","where":"2","how":"1Y"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T02:32:23.537Z","currplayer":2,"lastmove":"1Y-2,deck","board":[[["1S","3SK"],["8YK","7VY","5YK","PMYK","1Y"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY","6LK","4VL"],["9LK"]]],"hands":[["NS","2VL","0","NM","7SK","4YK"],["1V","6SY","5SV","1L","2SY","NY"]],"discard":["NK","1K","8VL","NV"],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"2 Suns Wyrms","where":"discard","how":"2SY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T02:33:39.553Z","currplayer":1,"lastmove":"2SY-discard,deck","board":[[["1S","3SK"],["8YK","7VY","5YK","PMYK","1Y"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY","6LK","4VL"],["9LK"]]],"hands":[["NS","2VL","0","NM","7SK","4YK"],["1V","6SY","5SV","1L","NY","3LY"]],"discard":["NK","1K","8VL","NV","2SY"],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"4 Wyrms Knots","where":"discard","how":"4YK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T02:34:46.992Z","currplayer":2,"lastmove":"4YK-discard,deck","board":[[["1S","3SK"],["8YK","7VY","5YK","PMYK","1Y"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY","6LK","4VL"],["9LK"]]],"hands":[["NS","2VL","0","NM","7SK","4MS"],["1V","6SY","5SV","1L","NY","3LY"]],"discard":["NK","1K","8VL","NV","2SY","4YK"],"drawn":[],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"3 Leaves Wyrms","where":"2","how":"3LY"},{"type":"deckDraw","what":"4 Wyrms Knots","from":"discard"}],"_timestamp":"2025-06-30T02:35:26.135Z","currplayer":1,"lastmove":"3LY-2,discard","board":[[["1S","3SK"],["8YK","7VY","5YK","PMYK","1Y"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY","6LK","4VL","3LY"],["9LK"]]],"hands":[["NS","2VL","0","NM","7SK","4MS"],["1V","6SY","5SV","1L","NY","4YK"]],"discard":["NK","1K","8VL","NV","2SY"],"drawn":["4YK"],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"4 Moons Suns","where":"1","how":"4MS"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T02:36:26.644Z","currplayer":2,"lastmove":"4MS-1,deck","board":[[["1S","3SK","4MS"],["8YK","7VY","5YK","PMYK","1Y"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY","6LK","4VL","3LY"],["9LK"]]],"hands":[["NS","2VL","0","NM","7SK","PSVK"],["1V","6SY","5SV","1L","NY","4YK"]],"discard":["NK","1K","8VL","NV","2SY"],"drawn":["4YK"],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"Crown Wyrms","where":"discard","how":"NY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T02:37:15.778Z","currplayer":1,"lastmove":"NY-discard,deck","board":[[["1S","3SK","4MS"],["8YK","7VY","5YK","PMYK","1Y"],["9VY","6MV"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY","6LK","4VL","3LY"],["9LK"]]],"hands":[["NS","2VL","0","NM","7SK","PSVK"],["1V","6SY","5SV","1L","4YK","5ML"]],"discard":["NK","1K","8VL","NV","2SY","NY"],"drawn":["4YK"],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"Pawn Suns Waves Knots","where":"3","how":"PSVK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T02:38:04.134Z","currplayer":2,"lastmove":"PSVK-3,deck","board":[[["1S","3SK","4MS"],["8YK","7VY","5YK","PMYK","1Y"],["9VY","6MV","PSVK"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY","6LK","4VL","3LY"],["9LK"]]],"hands":[["NS","2VL","0","NM","7SK","2MK"],["1V","6SY","5SV","1L","4YK","5ML"]],"discard":["NK","1K","8VL","NV","2SY","NY"],"drawn":["4YK"],"scores":[0,0],"year":1},{"_version":"20250610","_results":[{"type":"place","what":"5 Moons Leaves","where":"discard","how":"5ML"},{"type":"deckDraw","from":"deck"},{"type":"declare","count":1}],"_timestamp":"2025-06-30T02:38:52.732Z","currplayer":1,"lastmove":"5ML-discard,deck","board":[[["1S","3SK","4MS"],["8YK","7VY","5YK","PMYK","1Y"],["9VY","6MV","PSVK"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY","6LK","4VL","3LY"],["9LK"]]],"hands":[["NS","2VL","0","NM","7SK","2MK"],["1V","6SY","5SV","1L","4YK","8MS"]],"discard":["NK","1K","8VL","NV","2SY","NY","5ML"],"drawn":["4YK"],"scores":[0,0],"year":1,"eoy":false},{"_version":"20250610","_results":[{"type":"place","what":"7 Suns Knots","where":"1","how":"7SK"},{"type":"place","what":"2 Waves Leaves","where":"3","how":"2VL"},{"type":"place","what":"Crown Suns","where":"1","how":"NS"},{"type":"deltaScore","delta":-14,"description":"1, 3, 4, 7, 10"},{"type":"deltaScore","delta":10,"description":"8, 7, 5, 4, (A)"},{"type":"deltaScore","delta":2,"description":"9, 6, 5, 2"},{"type":"deltaScore","delta":14,"description":"excuse"}],"_timestamp":"2025-06-30T18:42:14.568Z","currplayer":2,"lastmove":"7SK-1,2VL-3,NS-1","board":[[["1S","3SK","4MS","7SK","NS"],["8YK","7VY","5YK","PMYK","1Y"],["9VY","6MV","PSVK","2VL"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY","6LK","4VL","3LY"],["9LK"]]],"hands":[["0","NM","2MK"],["1V","6SY","5SV","1L","4YK","8MS"]],"discard":["NK","1K","8VL","NV","2SY","NY","5ML"],"drawn":["4YK"],"scores":[12,0],"year":1,"eoy":true},{"_version":"20250610","_results":[{"type":"place","what":"Ace Leaves","where":"2","how":"1L"},{"type":"place","what":"4 Wyrms Knots","where":"3","how":"4YK"},{"type":"deltaScore","delta":12,"description":"3, 6, 7, 9, (A)"},{"type":"deltaScore","delta":14,"description":"9, 6, 4, 3, (AC)"},{"type":"deltaScore","delta":-5,"description":"9, 4"}],"_timestamp":"2025-06-30T18:43:13.691Z","currplayer":1,"lastmove":"1L-2,4YK-3","board":[[["1S","3SK","4MS","7SK","NS"],["8YK","7VY","5YK","PMYK","1Y"],["9VY","6MV","PSVK","2VL"]],[["1M","3MV","PMSL","7ML","9MS"],["NL","PVLY","6LK","4VL","3LY","1L"],["9LK","4YK"]]],"hands":[["0","NM","2MK"],["1V","6SY","5SV","8MS"]],"discard":["NK","1K","8VL","NV","2SY","NY","5ML"],"drawn":["4YK"],"scores":[12,21],"year":1,"eoy":true},{"_version":"20250610","_results":[{"type":"pass"}],"_timestamp":"2025-06-30T18:43:13.691Z","currplayer":2,"lastmove":"pass","board":[[],[]],"hands":[["1S","NS","PMSL","5ML","7VY","NL"],["5YK","NM","7SK","3SK","6SY","8VL"]],"discard":[],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"3 Suns Knots","where":"new","how":"3SK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T18:45:30.750Z","currplayer":1,"lastmove":"3SK-new,deck","board":[[],[["3SK"]]],"hands":[["1S","NS","PMSL","5ML","7VY","NL"],["5YK","NM","7SK","6SY","8VL","2SY"]],"discard":[],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"Ace Suns","where":"new","how":"1S"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T18:51:50.778Z","currplayer":2,"lastmove":"1S-new,deck","board":[[["1S"]],[["3SK"]]],"hands":[["NS","PMSL","5ML","7VY","NL","7ML"],["5YK","NM","7SK","6SY","8VL","2SY"]],"discard":[],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"5 Wyrms Knots","where":"1","how":"5YK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T18:52:18.491Z","currplayer":1,"lastmove":"5YK-1,deck","board":[[["1S"]],[["3SK","5YK"]]],"hands":[["NS","PMSL","5ML","7VY","NL","7ML"],["NM","7SK","6SY","8VL","2SY","NV"]],"discard":[],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"Crown Leaves","where":"new","how":"NL"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T18:53:08.136Z","currplayer":2,"lastmove":"NL-new,deck","board":[[["1S"],["NL"]],[["3SK","5YK"]]],"hands":[["NS","PMSL","5ML","7VY","7ML","PSVK"],["NM","7SK","6SY","8VL","2SY","NV"]],"discard":[],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"Crown Waves","where":"new","how":"NV"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T18:54:26.015Z","currplayer":1,"lastmove":"NV-new,deck","board":[[["1S"],["NL"]],[["3SK","5YK"],["NV"]]],"hands":[["NS","PMSL","5ML","7VY","7ML","PSVK"],["NM","7SK","6SY","8VL","2SY","NY"]],"discard":[],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"Pawn Moons Suns Leaves","where":"2","how":"PMSL"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T18:54:50.067Z","currplayer":2,"lastmove":"PMSL-2,deck","board":[[["1S"],["NL","PMSL"]],[["3SK","5YK"],["NV"]]],"hands":[["NS","5ML","7VY","7ML","PSVK","9MS"],["NM","7SK","6SY","8VL","2SY","NY"]],"discard":[],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"8 Waves Leaves","where":"2","how":"8VL"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T18:55:24.333Z","currplayer":1,"lastmove":"8VL-2,deck","board":[[["1S"],["NL","PMSL"]],[["3SK","5YK"],["NV","8VL"]]],"hands":[["NS","5ML","7VY","7ML","PSVK","9MS"],["NM","7SK","6SY","2SY","NY","1M"]],"discard":[],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"7 Moons Leaves","where":"2","how":"7ML"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T18:55:54.677Z","currplayer":2,"lastmove":"7ML-2,deck","board":[[["1S"],["NL","PMSL","7ML"]],[["3SK","5YK"],["NV","8VL"]]],"hands":[["NS","5ML","7VY","PSVK","9MS","3LY"],["NM","7SK","6SY","2SY","NY","1M"]],"discard":[],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"Crown Moons","where":"discard","how":"NM"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T18:57:08.694Z","currplayer":1,"lastmove":"NM-discard,deck","board":[[["1S"],["NL","PMSL","7ML"]],[["3SK","5YK"],["NV","8VL"]]],"hands":[["NS","5ML","7VY","PSVK","9MS","3LY"],["7SK","6SY","2SY","NY","1M","1Y"]],"discard":["NM"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"5 Moons Leaves","where":"2","how":"5ML"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T18:58:12.169Z","currplayer":2,"lastmove":"5ML-2,deck","board":[[["1S"],["NL","PMSL","7ML","5ML"]],[["3SK","5YK"],["NV","8VL"]]],"hands":[["NS","7VY","PSVK","9MS","3LY","4YK"],["7SK","6SY","2SY","NY","1M","1Y"]],"discard":["NM"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"7 Suns Knots","where":"1","how":"7SK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:01:03.073Z","currplayer":1,"lastmove":"7SK-1,deck","board":[[["1S"],["NL","PMSL","7ML","5ML"]],[["3SK","5YK","7SK"],["NV","8VL"]]],"hands":[["NS","7VY","PSVK","9MS","3LY","4YK"],["6SY","2SY","NY","1M","1Y","2VL"]],"discard":["NM"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"3 Leaves Wyrms","where":"2","how":"3LY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:01:31.542Z","currplayer":2,"lastmove":"3LY-2,deck","board":[[["1S"],["NL","PMSL","7ML","5ML","3LY"]],[["3SK","5YK","7SK"],["NV","8VL"]]],"hands":[["NS","7VY","PSVK","9MS","4YK","9VY"],["6SY","2SY","NY","1M","1Y","2VL"]],"discard":["NM"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"Ace Wyrms","where":"new","how":"1Y"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:03:11.875Z","currplayer":1,"lastmove":"1Y-new,deck","board":[[["1S"],["NL","PMSL","7ML","5ML","3LY"]],[["3SK","5YK","7SK"],["NV","8VL"],["1Y"]]],"hands":[["NS","7VY","PSVK","9MS","4YK","9VY"],["6SY","2SY","NY","1M","2VL","NK"]],"discard":["NM"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"9 Waves Wyrms","where":"new","how":"9VY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:03:55.943Z","currplayer":2,"lastmove":"9VY-new,deck","board":[[["1S"],["NL","PMSL","7ML","5ML","3LY"],["9VY"]],[["3SK","5YK","7SK"],["NV","8VL"],["1Y"]]],"hands":[["NS","7VY","PSVK","9MS","4YK","9LK"],["6SY","2SY","NY","1M","2VL","NK"]],"discard":["NM"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"2 Suns Wyrms","where":"3","how":"2SY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:08:06.514Z","currplayer":1,"lastmove":"2SY-3,deck","board":[[["1S"],["NL","PMSL","7ML","5ML","3LY"],["9VY"]],[["3SK","5YK","7SK"],["NV","8VL"],["1Y","2SY"]]],"hands":[["NS","7VY","PSVK","9MS","4YK","9LK"],["6SY","NY","1M","2VL","NK","4VL"]],"discard":["NM"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"7 Waves Wyrms","where":"3","how":"7VY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:08:51.056Z","currplayer":2,"lastmove":"7VY-3,deck","board":[[["1S"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY"]],[["3SK","5YK","7SK"],["NV","8VL"],["1Y","2SY"]]],"hands":[["NS","PSVK","9MS","4YK","9LK","8YK"],["6SY","NY","1M","2VL","NK","4VL"]],"discard":["NM"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"Ace Moons","where":"discard","how":"1M"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:10:06.055Z","currplayer":1,"lastmove":"1M-discard,deck","board":[[["1S"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY"]],[["3SK","5YK","7SK"],["NV","8VL"],["1Y","2SY"]]],"hands":[["NS","PSVK","9MS","4YK","9LK","8YK"],["6SY","NY","2VL","NK","4VL","3MV"]],"discard":["NM","1M"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"4 Wyrms Knots","where":"discard","how":"4YK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:11:08.319Z","currplayer":2,"lastmove":"4YK-discard,deck","board":[[["1S"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY"]],[["3SK","5YK","7SK"],["NV","8VL"],["1Y","2SY"]]],"hands":[["NS","PSVK","9MS","9LK","8YK","6MV"],["6SY","NY","2VL","NK","4VL","3MV"]],"discard":["NM","1M","4YK"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"Crown Wyrms","where":"discard","how":"NY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:12:36.520Z","currplayer":1,"lastmove":"NY-discard,deck","board":[[["1S"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY"]],[["3SK","5YK","7SK"],["NV","8VL"],["1Y","2SY"]]],"hands":[["NS","PSVK","9MS","9LK","8YK","6MV"],["6SY","2VL","NK","4VL","3MV","0"]],"discard":["NM","1M","4YK","NY"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"6 Moons Waves","where":"3","how":"6MV"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:13:00.324Z","currplayer":2,"lastmove":"6MV-3,deck","board":[[["1S"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY","6MV"]],[["3SK","5YK","7SK"],["NV","8VL"],["1Y","2SY"]]],"hands":[["NS","PSVK","9MS","9LK","8YK","4MS"],["6SY","2VL","NK","4VL","3MV","0"]],"discard":["NM","1M","4YK","NY"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"6 Suns Wyrms","where":"3","how":"6SY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:14:36.768Z","currplayer":1,"lastmove":"6SY-3,deck","board":[[["1S"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY","6MV"]],[["3SK","5YK","7SK"],["NV","8VL"],["1Y","2SY","6SY"]]],"hands":[["NS","PSVK","9MS","9LK","8YK","4MS"],["2VL","NK","4VL","3MV","0","1K"]],"discard":["NM","1M","4YK","NY"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"4 Moons Suns","where":"1","how":"4MS"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:15:09.813Z","currplayer":2,"lastmove":"4MS-1,deck","board":[[["1S","4MS"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY","6MV"]],[["3SK","5YK","7SK"],["NV","8VL"],["1Y","2SY","6SY"]]],"hands":[["NS","PSVK","9MS","9LK","8YK","PMYK"],["2VL","NK","4VL","3MV","0","1K"]],"discard":["NM","1M","4YK","NY"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"Ace Knots","where":"discard","how":"1K"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:15:50.695Z","currplayer":1,"lastmove":"1K-discard,deck","board":[[["1S","4MS"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY","6MV"]],[["3SK","5YK","7SK"],["NV","8VL"],["1Y","2SY","6SY"]]],"hands":[["NS","PSVK","9MS","9LK","8YK","PMYK"],["2VL","NK","4VL","3MV","0","PVLY"]],"discard":["NM","1M","4YK","NY","1K"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"Pawn Suns Waves Knots","where":"1","how":"PSVK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:16:34.402Z","currplayer":2,"lastmove":"PSVK-1,deck","board":[[["1S","4MS","PSVK"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY","6MV"]],[["3SK","5YK","7SK"],["NV","8VL"],["1Y","2SY","6SY"]]],"hands":[["NS","9MS","9LK","8YK","PMYK","2MK"],["2VL","NK","4VL","3MV","0","PVLY"]],"discard":["NM","1M","4YK","NY","1K"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"Pawn Waves Leaves Wyrms","where":"2","how":"PVLY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:17:02.405Z","currplayer":1,"lastmove":"PVLY-2,deck","board":[[["1S","4MS","PSVK"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY","6MV"]],[["3SK","5YK","7SK"],["NV","8VL","PVLY"],["1Y","2SY","6SY"]]],"hands":[["NS","9MS","9LK","8YK","PMYK","2MK"],["2VL","NK","4VL","3MV","0","1L"]],"discard":["NM","1M","4YK","NY","1K"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"2 Moons Knots","where":"discard","how":"2MK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:29:19.443Z","currplayer":2,"lastmove":"2MK-discard,deck","board":[[["1S","4MS","PSVK"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY","6MV"]],[["3SK","5YK","7SK"],["NV","8VL","PVLY"],["1Y","2SY","6SY"]]],"hands":[["NS","9MS","9LK","8YK","PMYK","1V"],["2VL","NK","4VL","3MV","0","1L"]],"discard":["NM","1M","4YK","NY","1K","2MK"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"4 Waves Leaves","where":"2","how":"4VL"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:29:54.758Z","currplayer":1,"lastmove":"4VL-2,deck","board":[[["1S","4MS","PSVK"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY","6MV"]],[["3SK","5YK","7SK"],["NV","8VL","PVLY","4VL"],["1Y","2SY","6SY"]]],"hands":[["NS","9MS","9LK","8YK","PMYK","1V"],["2VL","NK","3MV","0","1L","5SV"]],"discard":["NM","1M","4YK","NY","1K","2MK"],"drawn":[],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"9 Leaves Knots","where":"new","how":"9LK"},{"type":"deckDraw","what":"2 Moons Knots","from":"discard"}],"_timestamp":"2025-06-30T19:31:13.518Z","currplayer":2,"lastmove":"9LK-new,discard","board":[[["1S","4MS","PSVK"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY","6MV"],["9LK"]],[["3SK","5YK","7SK"],["NV","8VL","PVLY","4VL"],["1Y","2SY","6SY"]]],"hands":[["NS","9MS","8YK","PMYK","1V","2MK"],["2VL","NK","3MV","0","1L","5SV"]],"discard":["NM","1M","4YK","NY","1K"],"drawn":["2MK"],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"3 Moons Waves","where":"2","how":"3MV"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T19:31:43.457Z","currplayer":1,"lastmove":"3MV-2,deck","board":[[["1S","4MS","PSVK"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY","6MV"],["9LK"]],[["3SK","5YK","7SK"],["NV","8VL","PVLY","4VL","3MV"],["1Y","2SY","6SY"]]],"hands":[["NS","9MS","8YK","PMYK","1V","2MK"],["2VL","NK","0","1L","5SV","8MS"]],"discard":["NM","1M","4YK","NY","1K"],"drawn":["2MK"],"scores":[12,21],"year":2},{"_version":"20250610","_results":[{"type":"place","what":"8 Wyrms Knots","where":"4","how":"8YK"},{"type":"deckDraw","from":"deck"},{"type":"declare","count":2}],"_timestamp":"2025-06-30T19:33:09.019Z","currplayer":2,"lastmove":"8YK-4,deck","board":[[["1S","4MS","PSVK"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY","6MV"],["9LK","8YK"]],[["3SK","5YK","7SK"],["NV","8VL","PVLY","4VL","3MV"],["1Y","2SY","6SY"]]],"hands":[["NS","9MS","PMYK","1V","2MK","6LK"],["2VL","NK","0","1L","5SV","8MS"]],"discard":["NM","1M","4YK","NY","1K"],"drawn":["2MK"],"scores":[12,21],"year":2,"eoy":false},{"_version":"20250610","_results":[{"type":"place","what":"2 Waves Leaves","where":"2","how":"2VL"},{"type":"place","what":"Crown Knots","where":"1","how":"NK"},{"type":"deltaScore","delta":-8,"description":"3, 5, 7, 10"},{"type":"deltaScore","delta":11,"description":"8, 7, 4, 3, 2, (C)"},{"type":"deltaScore","delta":-15,"description":"1, 2, 6"},{"type":"deltaScore","delta":15,"description":"excuse"}],"_timestamp":"2025-06-30T19:42:02.618Z","currplayer":1,"lastmove":"2VL-2,NK-1","board":[[["1S","4MS","PSVK"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY","6MV"],["9LK","8YK"]],[["3SK","5YK","7SK","NK"],["NV","8VL","PVLY","4VL","3MV","2VL"],["1Y","2SY","6SY"]]],"hands":[["NS","9MS","PMYK","1V","2MK","6LK"],["0","1L","5SV","8MS"]],"discard":["NM","1M","4YK","NY","1K"],"drawn":["2MK"],"scores":[12,24],"year":2,"eoy":true},{"_version":"20250610","_results":[{"type":"place","what":"Pawn Moons Wyrms Knots","where":"4","how":"PMYK"},{"type":"place","what":"6 Leaves Knots","where":"4","how":"6LK"},{"type":"place","what":"9 Moons Suns","where":"1","how":"9MS"},{"type":"place","what":"Crown Suns","where":"1","how":"NS"},{"type":"place","what":"2 Moons Knots","where":"4","how":"2MK"},{"type":"place","what":"Ace Waves","where":"3","how":"1V"},{"type":"deltaScore","delta":10,"description":"4, 5, 9, (AC)"},{"type":"deltaScore","delta":10,"description":"9, 7, 5, 3, (C)"},{"type":"deltaScore","delta":5,"description":"9, 7, 6, (A)"},{"type":"deltaScore","delta":14,"description":"9, 8, 7, 6, 2"}],"_timestamp":"2025-06-30T20:28:46.936Z","currplayer":2,"lastmove":"PMYK-4,6LK-4,9MS-1,NS-1,2MK-4,1V-3","board":[[["1S","4MS","PSVK","9MS","NS"],["NL","PMSL","7ML","5ML","3LY"],["9VY","7VY","6MV","1V"],["9LK","8YK","PMYK","6LK","2MK"]],[["3SK","5YK","7SK","NK"],["NV","8VL","PVLY","4VL","3MV","2VL"],["1Y","2SY","6SY"]]],"hands":[[],["0","1L","5SV","8MS"]],"discard":["NM","1M","4YK","NY","1K"],"drawn":["2MK"],"scores":[51,24],"year":2,"eoy":true},{"_version":"20250610","_results":[{"type":"pass"}],"_timestamp":"2025-06-30T20:28:46.936Z","currplayer":1,"lastmove":"pass","board":[[],[]],"hands":[["2SY","1S","7VY","8VL","1V","2MK"],["6MV","1L","7SK","7ML","9MS","4VL"]],"discard":[],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"8 Waves Leaves","where":"new","how":"8VL"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:35:13.955Z","currplayer":2,"lastmove":"8VL-new,deck","board":[[["8VL"]],[]],"hands":[["2SY","1S","7VY","1V","2MK","8YK"],["6MV","1L","7SK","7ML","9MS","4VL"]],"discard":[],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"9 Moons Suns","where":"new","how":"9MS"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:35:32.710Z","currplayer":1,"lastmove":"9MS-new,deck","board":[[["8VL"]],[["9MS"]]],"hands":[["2SY","1S","7VY","1V","2MK","8YK"],["6MV","1L","7SK","7ML","4VL","1M"]],"discard":[],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"7 Waves Wyrms","where":"1","how":"7VY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:35:49.950Z","currplayer":2,"lastmove":"7VY-1,deck","board":[[["8VL","7VY"]],[["9MS"]]],"hands":[["2SY","1S","1V","2MK","8YK","PMSL"],["6MV","1L","7SK","7ML","4VL","1M"]],"discard":[],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"7 Moons Leaves","where":"1","how":"7ML"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:36:13.329Z","currplayer":1,"lastmove":"7ML-1,deck","board":[[["8VL","7VY"]],[["9MS","7ML"]]],"hands":[["2SY","1S","1V","2MK","8YK","PMSL"],["6MV","1L","7SK","4VL","1M","5ML"]],"discard":[],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"Ace Suns","where":"new","how":"1S"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:36:45.165Z","currplayer":2,"lastmove":"1S-new,deck","board":[[["8VL","7VY"],["1S"]],[["9MS","7ML"]]],"hands":[["2SY","1V","2MK","8YK","PMSL","2VL"],["6MV","1L","7SK","4VL","1M","5ML"]],"discard":[],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"6 Moons Waves","where":"1","how":"6MV"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:37:27.439Z","currplayer":1,"lastmove":"6MV-1,deck","board":[[["8VL","7VY"],["1S"]],[["9MS","7ML","6MV"]]],"hands":[["2SY","1V","2MK","8YK","PMSL","2VL"],["1L","7SK","4VL","1M","5ML","NK"]],"discard":[],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"2 Suns Wyrms","where":"2","how":"2SY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:37:45.527Z","currplayer":2,"lastmove":"2SY-2,deck","board":[[["8VL","7VY"],["1S","2SY"]],[["9MS","7ML","6MV"]]],"hands":[["1V","2MK","8YK","PMSL","2VL","PMYK"],["1L","7SK","4VL","1M","5ML","NK"]],"discard":[],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"5 Moons Leaves","where":"1","how":"5ML"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:38:12.866Z","currplayer":1,"lastmove":"5ML-1,deck","board":[[["8VL","7VY"],["1S","2SY"]],[["9MS","7ML","6MV","5ML"]]],"hands":[["1V","2MK","8YK","PMSL","2VL","PMYK"],["1L","7SK","4VL","1M","NK","PSVK"]],"discard":[],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"Pawn Moons Suns Leaves","where":"2","how":"PMSL"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:38:36.702Z","currplayer":2,"lastmove":"PMSL-2,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"]],[["9MS","7ML","6MV","5ML"]]],"hands":[["1V","2MK","8YK","2VL","PMYK","NY"],["1L","7SK","4VL","1M","NK","PSVK"]],"discard":[],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"Crown Knots","where":"new","how":"NK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:39:12.190Z","currplayer":1,"lastmove":"NK-new,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"]],[["9MS","7ML","6MV","5ML"],["NK"]]],"hands":[["1V","2MK","8YK","2VL","PMYK","NY"],["1L","7SK","4VL","1M","PSVK","NS"]],"discard":[],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"Crown Wyrms","where":"new","how":"NY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:39:35.669Z","currplayer":2,"lastmove":"NY-new,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY"]],[["9MS","7ML","6MV","5ML"],["NK"]]],"hands":[["1V","2MK","8YK","2VL","PMYK","1K"],["1L","7SK","4VL","1M","PSVK","NS"]],"discard":[],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"Pawn Suns Waves Knots","where":"2","how":"PSVK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:40:12.345Z","currplayer":1,"lastmove":"PSVK-2,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK"]]],"hands":[["1V","2MK","8YK","2VL","PMYK","1K"],["1L","7SK","4VL","1M","NS","NM"]],"discard":[],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"Pawn Moons Wyrms Knots","where":"3","how":"PMYK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:41:07.208Z","currplayer":2,"lastmove":"PMYK-3,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY","PMYK"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK"]]],"hands":[["1V","2MK","8YK","2VL","1K","NV"],["1L","7SK","4VL","1M","NS","NM"]],"discard":[],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"Crown Moons","where":"discard","how":"NM"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:41:49.735Z","currplayer":1,"lastmove":"NM-discard,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY","PMYK"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK"]]],"hands":[["1V","2MK","8YK","2VL","1K","NV"],["1L","7SK","4VL","1M","NS","6LK"]],"discard":["NM"],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"Crown Waves","where":"discard","how":"NV"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:42:22.112Z","currplayer":2,"lastmove":"NV-discard,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY","PMYK"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK"]]],"hands":[["1V","2MK","8YK","2VL","1K","9LK"],["1L","7SK","4VL","1M","NS","6LK"]],"discard":["NM","NV"],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"Ace Leaves","where":"new","how":"1L"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:43:52.592Z","currplayer":1,"lastmove":"1L-new,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY","PMYK"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK"],["1L"]]],"hands":[["1V","2MK","8YK","2VL","1K","9LK"],["7SK","4VL","1M","NS","6LK","NL"]],"discard":["NM","NV"],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"8 Wyrms Knots","where":"3","how":"8YK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:44:25.108Z","currplayer":2,"lastmove":"8YK-3,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY","PMYK","8YK"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK"],["1L"]]],"hands":[["1V","2MK","2VL","1K","9LK","1Y"],["7SK","4VL","1M","NS","6LK","NL"]],"discard":["NM","NV"],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"7 Suns Knots","where":"2","how":"7SK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:45:30.087Z","currplayer":1,"lastmove":"7SK-2,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY","PMYK","8YK"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK","7SK"],["1L"]]],"hands":[["1V","2MK","2VL","1K","9LK","1Y"],["4VL","1M","NS","6LK","NL","5YK"]],"discard":["NM","NV"],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"Ace Wyrms","where":"discard","how":"1Y"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:47:30.784Z","currplayer":2,"lastmove":"1Y-discard,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY","PMYK","8YK"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK","7SK"],["1L"]]],"hands":[["1V","2MK","2VL","1K","9LK","9VY"],["4VL","1M","NS","6LK","NL","5YK"]],"discard":["NM","NV","1Y"],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"6 Leaves Knots","where":"2","how":"6LK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:48:10.798Z","currplayer":1,"lastmove":"6LK-2,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY","PMYK","8YK"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK","7SK","6LK"],["1L"]]],"hands":[["1V","2MK","2VL","1K","9LK","9VY"],["4VL","1M","NS","NL","5YK","5SV"]],"discard":["NM","NV","1Y"],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"9 Waves Wyrms","where":"discard","how":"9VY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:49:31.064Z","currplayer":2,"lastmove":"9VY-discard,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY","PMYK","8YK"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK","7SK","6LK"],["1L"]]],"hands":[["1V","2MK","2VL","1K","9LK","8MS"],["4VL","1M","NS","NL","5YK","5SV"]],"discard":["NM","NV","1Y","9VY"],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"5 Wyrms Knots","where":"2","how":"5YK"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:50:06.174Z","currplayer":1,"lastmove":"5YK-2,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY","PMYK","8YK"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK","7SK","6LK","5YK"],["1L"]]],"hands":[["1V","2MK","2VL","1K","9LK","8MS"],["4VL","1M","NS","NL","5SV","0"]],"discard":["NM","NV","1Y","9VY"],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"Ace Waves","where":"discard","how":"1V"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:51:13.976Z","currplayer":2,"lastmove":"1V-discard,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY","PMYK","8YK"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK","7SK","6LK","5YK"],["1L"]]],"hands":[["2MK","2VL","1K","9LK","8MS","3LY"],["4VL","1M","NS","NL","5SV","0"]],"discard":["NM","NV","1Y","9VY","1V"],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"4 Waves Leaves","where":"3","how":"4VL"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:52:43.881Z","currplayer":1,"lastmove":"4VL-3,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY","PMYK","8YK"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK","7SK","6LK","5YK"],["1L","4VL"]]],"hands":[["2MK","2VL","1K","9LK","8MS","3LY"],["1M","NS","NL","5SV","0","PVLY"]],"discard":["NM","NV","1Y","9VY","1V"],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"3 Leaves Wyrms","where":"discard","how":"3LY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:53:46.520Z","currplayer":2,"lastmove":"3LY-discard,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY","PMYK","8YK"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK","7SK","6LK","5YK"],["1L","4VL"]]],"hands":[["2MK","2VL","1K","9LK","8MS","4MS"],["1M","NS","NL","5SV","0","PVLY"]],"discard":["NM","NV","1Y","9VY","1V","3LY"],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"Pawn Waves Leaves Wyrms","where":"3","how":"PVLY"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:54:32.541Z","currplayer":1,"lastmove":"PVLY-3,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL"],["NY","PMYK","8YK"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK","7SK","6LK","5YK"],["1L","4VL","PVLY"]]],"hands":[["2MK","2VL","1K","9LK","8MS","4MS"],["1M","NS","NL","5SV","0","3MV"]],"discard":["NM","NV","1Y","9VY","1V","3LY"],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"4 Moons Suns","where":"2","how":"4MS"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:56:52.152Z","currplayer":2,"lastmove":"4MS-2,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL","4MS"],["NY","PMYK","8YK"]],[["9MS","7ML","6MV","5ML"],["NK","PSVK","7SK","6LK","5YK"],["1L","4VL","PVLY"]]],"hands":[["2MK","2VL","1K","9LK","8MS","3SK"],["1M","NS","NL","5SV","0","3MV"]],"discard":["NM","NV","1Y","9VY","1V","3LY"],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"3 Moons Waves","where":"1","how":"3MV"},{"type":"deckDraw","from":"deck"}],"_timestamp":"2025-06-30T20:57:37.800Z","currplayer":1,"lastmove":"3MV-1,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL","4MS"],["NY","PMYK","8YK"]],[["9MS","7ML","6MV","5ML","3MV"],["NK","PSVK","7SK","6LK","5YK"],["1L","4VL","PVLY"]]],"hands":[["2MK","2VL","1K","9LK","8MS","3SK"],["1M","NS","NL","5SV","0","6SY"]],"discard":["NM","NV","1Y","9VY","1V","3LY"],"drawn":[],"scores":[51,24],"year":3},{"_version":"20250610","_results":[{"type":"place","what":"8 Moons Suns","where":"2","how":"8MS"},{"type":"deckDraw","from":"deck"},{"type":"declare","count":3}],"_timestamp":"2025-06-30T20:58:19.505Z","currplayer":2,"lastmove":"8MS-2,deck","board":[[["8VL","7VY"],["1S","2SY","PMSL","4MS","8MS"],["NY","PMYK","8YK"]],[["9MS","7ML","6MV","5ML","3MV"],["NK","PSVK","7SK","6LK","5YK"],["1L","4VL","PVLY"]]],"hands":[["2MK","2VL","1K","9LK","3SK","4YK"],["1M","NS","NL","5SV","0","6SY"]],"discard":["NM","NV","1Y","9VY","1V","3LY"],"drawn":[],"scores":[51,24],"year":3,"eoy":false}]}`;

describe("Emu Ranchers", () => {
    it("Bird direction", () => {
        // birds hatched with Aces are ascending
        expect(birdDir(["1M"])).equal("A");
        // birds hatched with Crowns are descending
        expect(birdDir(["NM"])).equal("D");
        // all other single-card birds are undefined
        expect(birdDir(["5SV"])).to.be.null;
        // 2 + wild is ascending because wilds can't be Aces
        expect(birdDir(["2SY", "PSVK"])).equal("A");
        // 3 + wild is undefined
        expect(birdDir(["3SK", "PSVK"])).to.be.null;
        // 3 + 2 wilds must be ascending
        expect(birdDir(["3SK", "PSVK", "PMSL"])).equal("A");
        // 9 + wild is descending because wilds can't be Crowns
        expect(birdDir(["9MS", "PSVK"])).equal("D");
        // 8 + wild is undefined
        expect(birdDir(["8MS", "PSVK"])).to.be.null;
        // 8 + 2 wilds must be descending
        expect(birdDir(["8MS", "PSVK", "PMSL"])).equal("D");
        // nums with no wilds
        expect(birdDir(["2SY", "6SY"])).equal("A");
        expect(birdDir(["6SY", "2SY"])).equal("D");
        // nums with wilds
        expect(birdDir(["2SY", "PSVK", "6SY"])).equal("A");
        expect(birdDir(["6SY", "PSVK", "2SY"])).equal("D");
    });

    it("Bird suits", () => {
        // single card returns both suits
        expect(getBirdSuits(["5YK"])).eql(["Y", "K"]);
        // multiple matches found correctly
        expect(getBirdSuits(["5YK", "4YK"])).eql(["Y", "K"]);
        expect(getBirdSuits(["5YK", "PMYK"])).eql(["Y", "K"]);
        // singles
        expect(getBirdSuits(["1M", "6MV"])).eql(["M"]);
        expect(getBirdSuits(["7ML", "6MV"])).eql(["M"]);
    });

    it("Bird growth", () => {
        // must match suits
        expect(canGrowBird(["1M"], "5YK")).to.be.false;
        expect(canGrowBird(["1M"], "5ML")).to.be.true;

        // no wilds: direction consistent
        expect(canGrowBird(["1M", "3MV"], "2MK")).to.be.false;
        expect(canGrowBird(["1M", "3MV"], "4MS")).to.be.true;
        expect(canGrowBird(["5ML", "4MS"], "6MV")).to.be.false;
        expect(canGrowBird(["5ML", "4MS"], "3MV")).to.be.true;

        // wilds: middle wild lets you go either direction
        expect(canGrowBird(["5ML", "PMYK"], "8MS")).to.be.true;
        expect(canGrowBird(["5ML", "PMYK"], "3MV")).to.be.true;
        expect(canGrowBird(["5ML", "PMYK", "PMSL"], "2MK")).to.be.true;
        expect(canGrowBird(["5ML", "PMYK", "PMSL"], "8MS")).to.be.true;
        // wilds: but there has to be room
        expect(canGrowBird(["5ML", "PMYK"], "6MV")).to.be.false;
        expect(canGrowBird(["5ML", "PMYK"], "4MS")).to.be.false;
        expect(canGrowBird(["5ML", "PMYK", "PMSL"], "3MV")).to.be.false;
        expect(canGrowBird(["5ML", "PMYK", "PMSL"], "7ML")).to.be.false;
        // wilds: can't be Aces or Crowns
        expect(canGrowBird(["8MS", "9MS"], "PMYK")).to.be.false;
        expect(canGrowBird(["3MV", "1V"], "PMYK")).to.be.false;
        // wilds: but they can be others
        expect(canGrowBird(["7ML", "8MS"], "PMYK")).to.be.true;
        expect(canGrowBird(["4MS", "3MV"], "PMYK")).to.be.true;
    });

    it("Interpolate wilds", () => {
        // single wild, two options
        expect(interpolateWilds(["5YK", "PMYK", "8YK"])).eql([["5YK","6SY","8YK"],["5YK","7SK","8YK"]]);
        // two wilds, open ended
        expect(interpolateWilds(["5YK", "PMYK", "PSVK"])).eql([["5YK","6LK","7SK"],["5YK","6LK","8YK"],["5YK","6LK","9LK"],["5YK","7SK","8YK"],["5YK","7SK","9LK"],["5YK","8YK","9LK"]]);
        // two wilds descending (has to be explicit because otherwise it defaults to ascending)
        expect(interpolateWilds(["5YK", "PMYK", "PSVK", "1K"])).eql([["5YK","4YK","3SK","1K"],["5YK","4YK","2MK","1K"],["5YK","3SK","2MK","1K"]]);
    });

    it("Bird scores", () => {
        // no wilds
        expect(scoreBird(["2MK", "8YK"]).value).equal(-8);
        expect(scoreBird(["1K", "2MK", "8YK"]).value).equal(-13);
        expect(scoreBird(["2MK", "8YK", "NK"]).value).equal(-13);
        expect(scoreBird(["1K", "2MK", "8YK", "NK"]).value).equal(-18);
        expect(scoreBird(["2MK", "8YK", "9LK"]).value).equal(0);
        expect(scoreBird(["1K", "2MK", "8YK", "9LK"]).value).equal(5);
        expect(scoreBird(["2MK", "8YK", "9LK", "NK"]).value).equal(5);
        expect(scoreBird(["1K", "2MK", "8YK", "9LK", "NK"]).value).equal(10);
        expect(scoreBird(["2MK", "7SK", "8YK", "9LK"]).value).equal(8);
        expect(scoreBird(["1K", "2MK", "7SK", "8YK", "9LK"]).value).equal(13);
        expect(scoreBird(["2MK", "7SK", "8YK", "9LK", "NK"]).value).equal(13);
        expect(scoreBird(["1K", "2MK", "7SK", "8YK", "9LK", "NK"]).value).equal(18);
        // wilds
        expect(scoreBird(["5YK", "PMYK", "PSVK", "1K"]).value).equal(-11);
        expect(scoreBird(["5YK", "PMYK", "PSVK"]).value).equal(0);
        expect(scoreBird(["5YK", "PMYK", "PSVK", "9LK"]).value).equal(9);
    });

    it ("EOY move generation", () => {
        // Ace and Crown placement should be disallowed
        // on losing birds (bug state)
        const g = new EmuGame(bug1);
        expect(g.moves()).eql(["1M-1"]);
    });
});

