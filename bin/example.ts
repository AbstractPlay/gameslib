/**
 * A simple example of a command-line test script.
 * The `state` variable here at the top is what I might export from a bugged game, either dumped here from the command line or exported from a game in the live environment using the bug icon below a game board.
 * Then the code at the bottom shows how one might test specific functions.
 * You would run this from the root of the folder with the command `npx ts-node --esm bin/example.ts`.
 */

// const state = `{"game":"armadas","numplayers":2,"variants":[],"maxShips":1,"obstacles":[],"gameover":false,"winner":[],"stack":[{"_version":"20230714","_results":[],"_timestamp":"2023-07-16T22:11:11.074Z","currplayer":1,"ships":[],"phase":"place","ghosts":[]},{"_version":"20230714","_results":[{"type":"place","where":"Ukry","what":"2"},{"type":"place","where":"Smaelyj","what":"3"},{"type":"place","where":"Drutha","what":"1"}],"_timestamp":"2023-07-17T16:04:14.030Z","currplayer":2,"lastmove":"place 2 261.02 640.07 0 Ukry, place 3 371.44 572.86 0 Smaelyj, place 1 453.05 656.87 0 Drutha","phase":"place","ships":[{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":261.02,"_cy":640.07,"_facing":0},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":371.44,"_cy":572.86,"_facing":0},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":453.05,"_cy":656.87,"_facing":0}],"ghosts":[]},{"_version":"20230714","_results":[{"type":"place","where":"Eshoche","what":"1"},{"type":"place","where":"Xaryn","what":"2"},{"type":"place","where":"Ogru","what":"3"}],"_timestamp":"2023-07-17T18:38:56.785Z","currplayer":1,"lastmove":"place 1 278.47 49.36 180 Eshoche, place 2 329.31 90.58 180 Xaryn, place 3 391.14 72.71 180 Ogru","phase":"play","ships":[{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":261.02,"_cy":640.07,"_facing":0},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":371.44,"_cy":572.86,"_facing":0},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":453.05,"_cy":656.87,"_facing":0},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":278.47,"_cy":49.36,"_facing":180},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":329.31,"_cy":90.58,"_facing":180},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":391.14,"_cy":72.71,"_facing":180}],"ghosts":[]},{"_version":"20230714","_results":[{"type":"move","from":"0","to":"10.6","what":"Drutha"},{"type":"move","from":"10.6","to":"6.03","what":"Drutha"},{"type":"move","from":"6.03","to":"4.79","what":"Drutha"},{"type":"move","from":"4.79","to":"0.83","what":"Drutha"},{"type":"move","from":"0","to":"359.38","what":"Ukry"},{"type":"move","from":"359.38","to":"331.51","what":"Ukry"},{"type":"move","from":"331.51","to":"355.93","what":"Ukry"},{"type":"move","from":"0","to":"356.6","what":"Smaelyj"},{"type":"move","from":"356.6","to":"359.95","what":"Smaelyj"}],"_timestamp":"2023-07-17T21:54:36.926Z","currplayer":2,"lastmove":"Drutha move 10.6 6.03 4.79 0.83, Ukry move 359.38 331.51 355.93, Smaelyj move 356.6 359.95","phase":"play","ships":[{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":241.03231,"_cy":530.16242,"_facing":355.93},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":368.53582,"_cy":475.72325,"_facing":359.95},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":463.59851,"_cy":546.485,"_facing":0.83},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":278.47,"_cy":49.36,"_facing":180},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":329.31,"_cy":90.58,"_facing":180},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":391.14,"_cy":72.71,"_facing":180}],"ghosts":[{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":453.05,"_cy":656.87,"_facing":0},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":455.60488,"_cy":629.32921,"_facing":10.6},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":459.61877,"_cy":601.86527,"_facing":6.03},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":462.23755,"_cy":574.21283,"_facing":4.79},{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":261.02,"_cy":640.07,"_facing":0},{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":260.81335,"_cy":601.87668,"_facing":359.38},{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":251.49722,"_cy":565.99603,"_facing":331.51},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":371.44,"_cy":572.86,"_facing":0},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":369.99852,"_cy":524.29162,"_facing":356.6}]},{"_version":"20230714","_results":[{"type":"move","from":"180","to":"112.81","what":"Ogru"},{"type":"move","from":"112.81","to":"155.78","what":"Ogru"},{"type":"move","from":"180","to":"132.08","what":"Xaryn"},{"type":"move","from":"132.08","to":"143.23","what":"Xaryn"},{"type":"move","from":"143.23","to":"130.22","what":"Xaryn"},{"type":"move","from":"180","to":"115.07","what":"Eshoche"},{"type":"move","from":"115.07","to":"98.4","what":"Eshoche"},{"type":"move","from":"98.4","to":"114.42","what":"Eshoche"},{"type":"move","from":"114.42","to":"127.32","what":"Eshoche"}],"_timestamp":"2023-07-17T21:56:40.079Z","currplayer":1,"lastmove":"Ogru move 112.81 155.78, Xaryn move 132.08 143.23 130.22, Eshoche move 115.07 98.4 114.42 127.32","phase":"play","ships":[{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":241.03231,"_cy":530.16242,"_facing":355.93},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":368.53582,"_cy":475.72325,"_facing":359.95},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":463.59851,"_cy":546.485,"_facing":0.83},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":367.4487,"_cy":98.98119,"_facing":127.32},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":395.10367,"_cy":178.20084,"_facing":130.22},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":445.92067,"_cy":138.02707,"_facing":155.78}],"ghosts":[{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":391.14,"_cy":72.71,"_facing":180},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":413.54476,"_cy":106.43826,"_facing":112.81},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":329.31,"_cy":90.58,"_facing":180},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":343.48413,"_cy":122.47554,"_facing":132.08},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":369.08993,"_cy":150.57159,"_facing":143.23},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":278.47,"_cy":49.36,"_facing":180},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":291.05043,"_cy":69.13396,"_facing":115.07},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":317.37075,"_cy":77.04796,"_facing":98.4},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":343.75702,"_cy":84.81886,"_facing":114.42}]},{"_version":"20230714","_results":[{"type":"move","from":"359.95","to":"343.03","what":"Smaelyj"},{"type":"move","from":"343.03","to":"343.08","what":"Smaelyj"},{"type":"move","from":"0.83","to":"28.75","what":"Drutha"},{"type":"move","from":"28.75","to":"45.66","what":"Drutha"},{"type":"move","from":"45.66","to":"23.78","what":"Drutha"},{"type":"move","from":"23.78","to":"22.39","what":"Drutha"},{"type":"move","from":"355.93","to":"23.41","what":"Ukry"},{"type":"move","from":"23.41","to":"12.41","what":"Ukry"},{"type":"move","from":"12.41","to":"17.72","what":"Ukry"}],"_timestamp":"2023-07-17T22:33:52.925Z","currplayer":2,"lastmove":"Smaelyj move 343.03 343.08, Drutha move 28.75 45.66 23.78 22.39, Ukry move 23.41 12.41 17.72","phase":"play","ships":[{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":268.87255,"_cy":420.5697,"_facing":17.72},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":347.25259,"_cy":381.66972,"_facing":343.08},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":513.51842,"_cy":450.56837,"_facing":22.39},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":367.4487,"_cy":98.98119,"_facing":127.32},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":395.10367,"_cy":178.20084,"_facing":130.22},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":445.92067,"_cy":138.02707,"_facing":155.78}],"ghosts":[{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":368.53582,"_cy":475.72325,"_facing":359.95},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":361.4205,"_cy":428.17042,"_facing":343.03},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":463.59851,"_cy":546.485,"_facing":0.83},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":470.4801,"_cy":520.42079,"_facing":28.75},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":487.0939,"_cy":498.53686,"_facing":45.66},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":502.62766,"_cy":476.11996,"_facing":23.78},{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":241.03231,"_cy":530.16242,"_facing":355.93},{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":247.26435,"_cy":493.58812,"_facing":23.41},{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":258.95592,"_cy":457.41187,"_facing":12.41}]},{"_version":"20230714","_results":[{"type":"move","from":"155.78","to":"140.95","what":"Ogru"},{"type":"move","from":"140.95","to":"145.81","what":"Ogru"},{"type":"move","from":"130.22","to":"129.16","what":"Xaryn"},{"type":"move","from":"129.16","to":"142.21","what":"Xaryn"},{"type":"move","from":"142.21","to":"189.54","what":"Xaryn"},{"type":"move","from":"127.32","to":"126.78","what":"Eshoche"},{"type":"move","from":"126.78","to":"160.41","what":"Eshoche"},{"type":"move","from":"160.41","to":"125.79","what":"Eshoche"},{"type":"move","from":"125.79","to":"149.88","what":"Eshoche"}],"_timestamp":"2023-07-18T00:16:56.278Z","currplayer":1,"lastmove":"Ogru move 140.95 145.81, Xaryn move 129.16 142.21 189.54, Eshoche move 126.78 160.41 125.79 149.88","phase":"play","ships":[{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":268.87255,"_cy":420.5697,"_facing":17.72},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":347.25259,"_cy":381.66972,"_facing":343.08},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":513.51842,"_cy":450.56837,"_facing":22.39},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":439.55786,"_cy":178.46165,"_facing":149.88},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":459.5404,"_cy":263.66839,"_facing":189.54},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":500.175,"_cy":218.04948,"_facing":145.81}],"ghosts":[{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":445.92067,"_cy":138.02707,"_facing":155.78},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":471.20429,"_cy":179.06881,"_facing":140.95},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":395.10367,"_cy":178.20084,"_facing":130.22},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":424.49344,"_cy":202.59203,"_facing":129.16},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":451.00332,"_cy":229.74349,"_facing":142.21},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":367.4487,"_cy":98.98119,"_facing":127.32},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":389.61817,"_cy":115.71744,"_facing":126.78},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":405.3991,"_cy":137.11827,"_facing":160.41},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":421.32205,"_cy":158.32565,"_facing":125.79}]},{"_version":"20230714","_results":[{"type":"move","from":"22.39","to":"61.72","what":"Drutha"},{"type":"move","from":"61.72","to":"40.33","what":"Drutha"},{"type":"move","from":"40.33","to":"38.26","what":"Drutha"},{"type":"move","from":"38.26","to":"37.79","what":"Drutha"},{"type":"move","from":"343.08","to":"352.32","what":"Smaelyj"},{"type":"move","from":"352.32","to":"6.51","what":"Smaelyj"},{"type":"move","from":"17.72","to":"45.05","what":"Ukry"},{"type":"move","from":"45.05","to":"38.64","what":"Ukry"},{"type":"move","from":"38.64","to":"63.58","what":"Ukry"}],"_timestamp":"2023-07-18T00:28:08.474Z","currplayer":2,"lastmove":"Drutha move 61.72 40.33 38.26 37.79, Smaelyj move 352.32 6.51, Ukry move 45.05 38.64 63.58","phase":"play","ships":[{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":342.66833,"_cy":337.06421,"_facing":63.58},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":336.43804,"_cy":286.09232,"_facing":6.51},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":586.96012,"_cy":370.60283,"_facing":37.79},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":439.55786,"_cy":178.46165,"_facing":149.88},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":459.5404,"_cy":263.66839,"_facing":189.54},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":500.175,"_cy":218.04948,"_facing":145.81}],"ghosts":[{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":513.51842,"_cy":450.56837,"_facing":22.39},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":531.03997,"_cy":431.14622,"_facing":61.72},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":552.25985,"_cy":413.978,"_facing":40.33},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":569.84901,"_cy":392.48439,"_facing":38.26},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":347.25259,"_cy":381.66972,"_facing":343.08},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":336.93057,"_cy":334.32873,"_facing":352.32},{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":268.87255,"_cy":420.5697,"_facing":17.72},{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":288.20062,"_cy":388.88656,"_facing":45.05},{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":313.64093,"_cy":360.47803,"_facing":38.64}]},{"_version":"20230714","_results":[{"type":"move","from":"189.54","to":"118.41","what":"Xaryn"},{"type":"move","from":"118.41","to":"112.91","what":"Xaryn"},{"type":"move","from":"112.91","to":"72.39","what":"Xaryn"},{"type":"move","from":"145.81","to":"113.52","what":"Ogru"},{"type":"move","from":"113.52","to":"76.11","what":"Ogru"},{"type":"move","from":"149.88","to":"137.56","what":"Eshoche"},{"type":"move","from":"137.56","to":"135.45","what":"Eshoche"},{"type":"move","from":"135.45","to":"144.08","what":"Eshoche"},{"type":"move","from":"144.08","to":"161.77","what":"Eshoche"}],"_timestamp":"2023-07-18T18:31:24.556Z","currplayer":1,"lastmove":"Xaryn move 118.41 112.91 72.39, Ogru move 113.52 76.11, Eshoche move 137.56 135.45 144.08 161.77","phase":"play","ships":[{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":342.66833,"_cy":337.06421,"_facing":63.58},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":336.43804,"_cy":286.09232,"_facing":6.51},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":586.96012,"_cy":370.60283,"_facing":37.79},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":505.40025,"_cy":266.45751,"_facing":161.77},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":543.35361,"_cy":309.76443,"_facing":72.39},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":582.00063,"_cy":251.71896,"_facing":76.11}],"ghosts":[{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":459.5404,"_cy":263.66839,"_facing":189.54},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":473.17255,"_cy":291.58751,"_facing":118.41},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":507.56057,"_cy":308.10778,"_facing":112.91},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":500.175,"_cy":218.04948,"_facing":145.81},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":536.11952,"_cy":247.85413,"_facing":113.52},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":439.55786,"_cy":178.46165,"_facing":149.88},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":455.89995,"_cy":200.72499,"_facing":137.56},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":475.01591,"_cy":220.87252,"_facing":135.45},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":492.90738,"_cy":242.018,"_facing":144.08}]},{"_version":"20230714","_results":[{"type":"move","from":"37.79","to":"340.65","what":"Drutha"},{"type":"move","from":"340.65","to":"333.43","what":"Drutha"},{"type":"move","from":"333.43","to":"322.26","what":"Drutha"},{"type":"damage","who":"Xaryn","where":"Drutha"},{"type":"move","from":"6.51","to":"66.69","what":"Smaelyj"},{"type":"move","from":"66.69","to":"84.04","what":"Smaelyj"}],"_timestamp":"2023-07-18T20:01:35.338Z","currplayer":2,"lastmove":"Drutha move 340.65 333.43 322.26, Drutha attack Xaryn, Smaelyj move 66.69 84.04","phase":"play","ships":[{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":342.66833,"_cy":337.06421,"_facing":63.58},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":408.01127,"_cy":240.18399,"_facing":84.04},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":565.34109,"_cy":297.59085,"_facing":322.26},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":505.40025,"_cy":266.45751,"_facing":161.77},{"_dmg":1,"id":"Xaryn","owner":2,"size":2,"_cx":543.35361,"_cy":309.76443,"_facing":72.39},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":582.00063,"_cy":251.71896,"_facing":76.11}],"ghosts":[{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":586.96012,"_cy":370.60283,"_facing":37.79},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":590.86888,"_cy":346.52262,"_facing":340.65},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":580.05458,"_cy":320.99621,"_facing":333.43},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":336.43804,"_cy":286.09232,"_facing":6.51},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":361.5154,"_cy":252.3256,"_facing":66.69}]},{"_version":"20230714","_results":[{"type":"move","from":"76.11","to":"150.24","what":"Ogru"},{"type":"damage","who":"Drutha","where":"Ogru"},{"type":"destroy","what":"Drutha"},{"type":"move","from":"161.77","to":"87.23","what":"Eshoche"},{"type":"move","from":"87.23","to":"103.21","what":"Eshoche"},{"type":"move","from":"103.21","to":"123.36","what":"Eshoche"},{"type":"move","from":"123.36","to":"157.19","what":"Eshoche"}],"_timestamp":"2023-07-18T20:12:05.288Z","currplayer":1,"lastmove":"Ogru move 150.24, Ogru attack Drutha, Eshoche move 87.23 103.21 123.36 157.19","phase":"play","ships":[{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":342.66833,"_cy":337.06421,"_facing":63.58},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":408.01127,"_cy":240.18399,"_facing":84.04},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":593.11847,"_cy":312.7323,"_facing":157.19},{"_dmg":1,"id":"Xaryn","owner":2,"size":2,"_cx":543.35361,"_cy":309.76443,"_facing":72.39},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":617.65996,"_cy":266.98415,"_facing":150.24}],"ghosts":[{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":582.00063,"_cy":251.71896,"_facing":76.11},{"_dmg":0,"id":"Drutha","owner":1,"size":1,"_cx":565.34109,"_cy":297.59085,"_facing":322.26},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":505.40025,"_cy":266.45751,"_facing":161.77},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":523.6178,"_cy":278.97808,"_facing":87.23},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":551.01183,"_cy":281.48076,"_facing":103.21},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":576.13364,"_cy":292.29212,"_facing":123.36}]},{"_version":"20230714","_results":[{"type":"move","from":"84.04","to":"139.36","what":"Smaelyj"},{"type":"move","from":"139.36","to":"67.02","what":"Smaelyj"},{"type":"damage","who":"Xaryn","where":"Smaelyj"},{"type":"destroy","what":"Xaryn"},{"type":"move","from":"63.58","to":"124.39","what":"Ukry"},{"type":"move","from":"124.39","to":"148.94","what":"Ukry"},{"type":"move","from":"148.94","to":"131.72","what":"Ukry"}],"_timestamp":"2023-07-18T23:15:23.084Z","currplayer":2,"lastmove":"Smaelyj move 139.36 67.02, Smaelyj attack Xaryn, Ukry move 124.39 148.94 131.72","phase":"play","ships":[{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":425.24957,"_cy":395.56742,"_facing":131.72},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":486.22279,"_cy":265.05804,"_facing":67.02},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":593.11847,"_cy":312.7323,"_facing":157.19},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":617.65996,"_cy":266.98415,"_facing":150.24}],"ghosts":[{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":408.01127,"_cy":240.18399,"_facing":84.04},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":448.01577,"_cy":256.10371,"_facing":139.36},{"_dmg":0,"id":"Xaryn","owner":2,"size":2,"_cx":543.35361,"_cy":309.76443,"_facing":72.39},{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":342.66833,"_cy":337.06421,"_facing":63.58},{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":375.53021,"_cy":339.35348,"_facing":124.39},{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":401.14238,"_cy":366.49921,"_facing":148.94}]},{"_version":"20230714","_results":[{"type":"move","from":"150.24","to":"77.44","what":"Ogru"},{"type":"move","from":"77.44","to":"2.61","what":"Ogru"},{"type":"move","from":"157.19","to":"197.92","what":"Eshoche"},{"type":"move","from":"197.92","to":"150.85","what":"Eshoche"},{"type":"move","from":"150.85","to":"197.21","what":"Eshoche"},{"type":"move","from":"197.21","to":"190.83","what":"Eshoche"}],"_timestamp":"2023-07-18T23:33:46.241Z","currplayer":1,"lastmove":"Ogru move 77.44 2.61, Eshoche move 197.92 150.85 197.21 190.83","phase":"play","ships":[{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":425.24957,"_cy":395.56742,"_facing":131.72},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":486.22279,"_cy":265.05804,"_facing":67.02},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":592.65799,"_cy":416.40044,"_facing":190.83},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":678.27909,"_cy":253.23267,"_facing":2.61}],"ghosts":[{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":617.65996,"_cy":266.98415,"_facing":150.24},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":653.44837,"_cy":282.79857,"_facing":77.44},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":593.11847,"_cy":312.7323,"_facing":157.19},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":594.2294,"_cy":338.75011,"_facing":197.92},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":596.72118,"_cy":364.09503,"_facing":150.85},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":599.37704,"_cy":389.49189,"_facing":197.21}]},{"_version":"20230714","_results":[{"type":"move","from":"131.72","to":"121.98","what":"Ukry"},{"type":"move","from":"121.98","to":"128.35","what":"Ukry"},{"type":"move","from":"128.35","to":"101.52","what":"Ukry"},{"type":"move","from":"67.02","to":"140.02","what":"Smaelyj"},{"type":"move","from":"140.02","to":"88.87","what":"Smaelyj"}],"_timestamp":"2023-07-19T12:29:51.330Z","currplayer":2,"lastmove":"Ukry move 121.98 128.35 101.52, Smaelyj move 140.02 88.87","phase":"play","ships":[{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":520.5675,"_cy":456.01722,"_facing":101.52},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":564.13398,"_cy":292.33877,"_facing":88.87},{"_dmg":0,"id":"Eshoche","owner":2,"size":1,"_cx":592.65799,"_cy":416.40044,"_facing":190.83},{"_dmg":0,"id":"Ogru","owner":2,"size":3,"_cx":678.27909,"_cy":253.23267,"_facing":2.61}],"ghosts":[{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":425.24957,"_cy":395.56742,"_facing":131.72},{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":455.70272,"_cy":418.39076,"_facing":121.98},{"_dmg":0,"id":"Ukry","owner":1,"size":2,"_cx":486.8783,"_cy":440.3542,"_facing":128.35},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":486.22279,"_cy":265.05804,"_facing":67.02},{"_dmg":0,"id":"Smaelyj","owner":1,"size":3,"_cx":524.21632,"_cy":274.1935,"_facing":140.02}]}]}`;

import { GameFactory } from "../src/index";
import type { LinesOfActionGame } from "../src/games";
// import { replacer } from "../src/common";

const g = GameFactory("loa", undefined, ["scrambled", "classic"]) as LinesOfActionGame;
if (g === undefined) {
    console.log("Could not create game.");
} else {
    // console.log(g.validateMove("place 1 277 642 0 A, place 2 470 642 0 B, place 3 350 560 0 C"));
    // g.move("place 1 470 35 180 X, place 2 277 35 180 Y, place 3 370 155 180 Z");
    // console.log(JSON.stringify(g.moves()));
    console.log(JSON.stringify(g.render()));
}

